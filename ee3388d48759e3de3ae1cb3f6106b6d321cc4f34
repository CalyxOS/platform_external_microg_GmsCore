{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "9ad73d8f_b8d3f4e0",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000062
      },
      "writtenOn": "2023-05-19T19:45:30Z",
      "side": 1,
      "message": "Not yet tested",
      "revId": "ee3388d48759e3de3ae1cb3f6106b6d321cc4f34",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6f100e4c_07d05961",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2023-05-22T18:45:38Z",
      "side": 1,
      "message": "While this will definitely help with the problem, such a low timeout by default would have a negative impact on everyone\u0027s battery life.",
      "revId": "ee3388d48759e3de3ae1cb3f6106b6d321cc4f34",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "974ac5a5_474828f2",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000062
      },
      "writtenOn": "2023-05-22T18:48:22Z",
      "side": 1,
      "message": "How about 5 and 15? (My bluejay on stock has settled on 15min.)",
      "parentUuid": "6f100e4c_07d05961",
      "revId": "ee3388d48759e3de3ae1cb3f6106b6d321cc4f34",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b12f492c_d23b585f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000062
      },
      "writtenOn": "2023-05-22T18:56:32Z",
      "side": 1,
      "message": "Also to be clear, it wouldn\u0027t have a negative effect on *everyone\u0027s* battery life. Existing users would still have their existing learned timeouts. New users\u0027 timeouts would be learned higher over time (fairly quickly from my experience, likely within a day or two), unless the network type was deemed incapable of handling the higher timeouts.",
      "parentUuid": "974ac5a5_474828f2",
      "revId": "ee3388d48759e3de3ae1cb3f6106b6d321cc4f34",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1f0a6207_5f53a231",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2023-05-23T14:50:57Z",
      "side": 1,
      "message": "It\u0027d eventually have an effect as people\u0027s timeouts reset, due to connection issues and such.\n\n5 and 15 could be worth a try, however that would affect everyone, given it puts a cap on the higher end.\n\nI was going to say that maybe as a test APK, but people can already just manually set the timeouts.\n\nJust as I wrote that I was going to add what if the max is configurable but eh maybe that\u0027s also too much.\n\nWhat we really need is a better algorithm, and whatever else we\u0027re missing to make sure connection failures happen less frequently than they do now.",
      "parentUuid": "b12f492c_d23b585f",
      "revId": "ee3388d48759e3de3ae1cb3f6106b6d321cc4f34",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a434d1da_7005b35e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000062
      },
      "writtenOn": "2023-05-24T13:33:32Z",
      "side": 1,
      "message": "I\u0027m skeptical about needing a better algorithm and I don\u0027t think it\u0027s necessary to be so cautious about this change, but I can do some testing to see what the impact is on battery life if that would help us finally get some movement on this issue.\n\n1. Vanilla CalyxOS, fresh install, no extra apps, connected to Wi-Fi with microG intervals all set manually at 30 minutes.\n2. Vanilla CalyxOS, fresh install, no extra apps, connected to Wi-Fi with microG intervals all set manually at 15 minutes.\n3. Vanilla CalyxOS, fresh install, no extra apps, connected to Wi-Fi with microG intervals all set manually at 5 minutes.\n\nAll on the same device.",
      "parentUuid": "1f0a6207_5f53a231",
      "revId": "ee3388d48759e3de3ae1cb3f6106b6d321cc4f34",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5825299b_a3070072",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2023-05-24T13:38:16Z",
      "side": 1,
      "message": "It is necessary to be cautious because lately while there have been reports about issues with notifications, there haven\u0027t been that many reports. It is safe to assume that for the most part it works.\n\nThere are issues with certain apps such as Telegram, but that is app-specific, AFAIK microG receives that notification in time.\n\n\nWe can\u0027t make such a change for the entire userbase without more thought.\n\nThe testing is appreciated, part 3 isn\u0027t needed though because we last talked about going from (5,30) now to (5,15).\n\nIt can also just be a test APK for those who report issues for a start.",
      "parentUuid": "a434d1da_7005b35e",
      "revId": "ee3388d48759e3de3ae1cb3f6106b6d321cc4f34",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1dc8484a_ce6c0ed3",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000062
      },
      "writtenOn": "2023-05-24T13:55:47Z",
      "side": 1,
      "message": "OK, I\u0027ll try it. Let\u0027s try to avoid a test APK. We can just ask affected users to adjust their heartbeat interval manually for now. It should have the same effect.\n\nAlso, for comparison, Signal\u0027s background connection reconnects after about 90 seconds or so with no heartbeat response; we know that *does* impact battery life, though.",
      "parentUuid": "5825299b_a3070072",
      "revId": "ee3388d48759e3de3ae1cb3f6106b6d321cc4f34",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f2b7c153_cc1e1471",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000062
      },
      "writtenOn": "2023-05-24T13:56:35Z",
      "side": 1,
      "message": "(This is without microG obviously. That\u0027s a much better experience, battery aside, for users who take our advice and use encrypted calls/messages.)",
      "parentUuid": "1dc8484a_ce6c0ed3",
      "revId": "ee3388d48759e3de3ae1cb3f6106b6d321cc4f34",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c5f5c6d4_1051c0f2",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2023-05-24T14:03:23Z",
      "side": 1,
      "message": "\u003e We can just ask affected users to adjust their heartbeat interval manually for now.\n\nYeah that sounds good. Many already do that anyways.\n\n\u003e Signal\u0027s background connection reconnects after about 90 seconds \n\nSo if we dropped microG minimum down to 2 minutes from 5, anyone having frequent connection issues may have a better experience at the expense of battery life.\n\nFor anyone only occasionally having issues ideally it doesn\u0027t take too long to go high again (and then they stay there).\n\n\n\nA smarter algorithm could temporarily go down to a lower duration if there\u0027s too many failures recently. But we should discuss and pen that down a bit first before we go about making changes, I think.",
      "parentUuid": "f2b7c153_cc1e1471",
      "revId": "ee3388d48759e3de3ae1cb3f6106b6d321cc4f34",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5731313c_1055fcdf",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000062
      },
      "writtenOn": "2023-05-24T14:15:33Z",
      "side": 1,
      "message": "Like you said, an algorithm can help with frequent issues, but not random ones. Even the most stable networks will have an issue with a TCP connection sometimes -- it\u0027s normal, just the way it is. The algorithmic guessing game is fine to an extent, but the max interval should be reasonable enough that if you do get an important call/message during a random drop, you\u0027re guaranteed to be notified within a reasonable max period of time. Again, there is always a chance to reach the max regardless of how stable the network ordinarily is.\n\nSo, I think of it like this: what\u0027s the maximum worst-case scenario delay that would be acceptable?\n\nIn my opinion: 30 minutes max is completely unreasonable for just about anybody, even for very rare occasions. 15 minutes is at least an improvement, but still not reasonable at all for my own personal expectations. 5 minutes is a reasonable max for me personally, and *if* it weren\u0027t harsh on battery life, I think it would be a great choice for any users who rely on receiving messages in a timely manner. But again, its impact on battery life would absolutely be a factor to consider.",
      "parentUuid": "c5f5c6d4_1051c0f2",
      "revId": "ee3388d48759e3de3ae1cb3f6106b6d321cc4f34",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "951e5f51_a8742e25",
        "filename": "play-services-core/src/main/kotlin/org/microg/gms/gcm/GcmPrefs.kt",
        "patchSetId": 1
      },
      "lineNbr": 41,
      "author": {
        "id": 1000003
      },
      "writtenOn": "2023-05-19T20:13:28Z",
      "side": 1,
      "message": "Need to check this, but it may be that this won\u0027t have an effect, if the system limits us to alarms every 15min and doesn\u0027t allow smaller intervals.\n\n@Tommy did you check if this really works?",
      "revId": "ee3388d48759e3de3ae1cb3f6106b6d321cc4f34",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e341b073_214c96ab",
        "filename": "play-services-core/src/main/kotlin/org/microg/gms/gcm/GcmPrefs.kt",
        "patchSetId": 1
      },
      "lineNbr": 41,
      "author": {
        "id": 1000062
      },
      "writtenOn": "2023-05-19T20:16:45Z",
      "side": 1,
      "message": "No, I haven\u0027t gotten microG to compile yet.\n\nThe other day a user was having trouble with notifications and claimed 5 minutes didn\u0027t help, but 2 minutes did. It could be a coincidence.",
      "parentUuid": "951e5f51_a8742e25",
      "revId": "ee3388d48759e3de3ae1cb3f6106b6d321cc4f34",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    }
  ]
}